<h1 class="mb-4 text-3xl text-center font-bold mb-6">Gestion des enseignants</h1>

<div class="flex justify-center">
  <form #enseignantForm="ngForm" (ngSubmit)="onSubmit()"
    class="flex flex-wrap justify-center items-center gap-x-4 gap-y-2">
    <label class="flex items-center">
      Nom :
      <input type="text" name="nom" [(ngModel)]="nouvelEnseignant.nom" required
        class="border border-gray-400 rounded px-2 ml-2" />
    </label>
    <label class="flex items-center">
      Corps :
      <select name="corps" [(ngModel)]="nouvelEnseignant.corps" (ngModelChange)="setOrsSelonCorps($event)" required
        class="border border-gray-400 rounded px-2 ml-2">
        <option value="">--Choisir--</option>
        <option value="AGREGE(E)">Agrégé(e)</option>
        <option value="CERTIFIE(E)">Certifié(e)</option>
        <option value="BMP">BMP</option>
      </select>
    </label>
    <label class="flex items-center">
      ORS à temps complet :
      <input type="number" name="ors" [(ngModel)]="nouvelEnseignant.ors" min="1" max="40" required
        class="border border-gray-400 rounded px-2 ml-2 w-16 text-right" />
    </label>
    <label class="flex items-center">
      Quotité travaillée (%) :
      <input type="number" name="quotite" [(ngModel)]="nouvelEnseignant.quotite" min="0" max="100" required
        class="border border-gray-400 rounded px-2 ml-2 w-16 text-right" />
    </label>
    <div class="w-full flex justify-center gap-1 mt-2">
      <button type="submit" [disabled]="enseignantForm.invalid"
        class="bg-green-600 text-white border rounded px-4 mr-3 hover:bg-green-700 transition px-2 mt-2">
        Enregistrer
      </button>
      <button type="button" id="deleteButton"
        class="bg-red-600 text-white border rounded px-4 mr-3 hover:bg-red-700 transition px-2 mt-2"
        [disabled]="!enseignantSelectionne" (click)="deleteSelectedEnseignant()">
        Supprimer
      </button>
      <button type="button" id="modifyButton"
        class="bg-blue-600 text-white border rounded px-4 mr-3 hover:bg-blue-700 transition px-2 mt-2"
        [disabled]="!enseignantSelectionne" (click)="editSelectedEnseignant()">
        Modifier
      </button>
    </div>
  </form>
</div>

<div class="overflow-x-auto mt-6">
  <table class="table-auto w-full border border-gray-300 rounded-lg overflow-hidden shadow">
    <thead class="bg-blue-100">
      <tr>
        <th class="px-4 py-2 text-left font-semibold text-blue-800">Nom</th>
        <th class="px-4 py-2 text-left font-semibold text-blue-800">Corps</th>
        <th class="px-4 py-2 text-left font-semibold text-blue-800">ORS</th>
        <th class="px-4 py-2 text-left font-semibold text-blue-800">Quotité (%)</th>
        <th class="px-4 py-2 text-left font-semibold text-blue-800">Service hebdomadaire</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let enseignant of enseignants" (click)="selectEnseignant(enseignant)"
        [class.bg-blue-200]="enseignantSelectionne === enseignant"
        class="hover:bg-blue-50 transition-colors cursor-pointer">
        <td class="border-t px-4 py-2">{{ enseignant.nom }}</td>
        <td class="border-t px-4 py-2">{{ enseignant.corps }}</td>
        <td class="border-t px-4 py-2 text-left">{{ enseignant.ors }}</td>
        <td class="border-t px-4 py-2 text-left">{{ enseignant.quotite }}</td>
        <td class="border-t px-4 py-2 text-left">{{ enseignant.service_plancher }}</td>
      </tr>
    </tbody>
  </table>
</div>
<div class="flex justify-center mt-4 mb-2">
  <button type="button"
    class="bg-orange-600 text-white border rounded px-4 mr-3 hover:bg-orange-700 transition px-2 mt-2"
    [routerLink]="'/divisions'">
    Suivant
    <i class="fas fa-arrow-right"></i>
  </button>
</div>